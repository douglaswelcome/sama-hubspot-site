var offices={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[-122.419532,37.764734]},properties:{phoneFormatted:"xxxxxxxxxx",phone:"xxxxxxxxxx",suite:"Suite 301",address:"2017 Mission St",city:"San Francisco",country:"United States",crossStreet:"at 16th Street",postalCode:"94110",state:"CA"}},{type:"Feature",geometry:{type:"Point",coordinates:[-74.002527,40.718856]},properties:{phoneFormatted:"xxxxxxxxxx",phone:"xxxxxxxxxx",suite:"Suite 1711",address:"401 Broadway",city:"New York",country:"United States",crossStreet:"",postalCode:"10013",state:"NY"}},{type:"Feature",geometry:{type:"Point",coordinates:[-73.596279,45.52756]},properties:{phoneFormatted:"xxxxxxxxxx",phone:"xxxxxxxxxx",suite:"Suite 710",address:"5455 Av. De Gaspé",city:"Montréal",country:"Canada",crossStreet:"",postalCode:"H2T 3B3",state:"Québec"}},{type:"Feature",geometry:{type:"Point",coordinates:[4.318325,52.078561]},properties:{phoneFormatted:"xxxxxxxxxx",phone:"xxxxxxxxxx",address:"Kalvermarkt 53",city:"The Hague",country:"Netherlands",crossStreet:"",postalCode:"2511 CB",state:""}},{type:"Feature",geometry:{type:"Point",coordinates:[36.867291,-1.329689]},properties:{phoneFormatted:"xxxxxxxxxx",phone:"xxxxxxxxxx",suite:"2nd Floor, Block D3, Unit D1b and D2",address:"LR NO 12081/10 Sameer Business Park Mombasa Road",city:"Nairobi",country:"Kenya",crossStreet:"",postalCode:"",state:""}},{type:"Feature",geometry:{type:"Point",coordinates:[32.316805,2.787991]},properties:{phoneFormatted:"xxxxxxxxxx",phone:"xxxxxxxxxx",address:"Gulu University",suite:"Adjacent to Block D & E",city:"Gulu",country:"Uganda",crossStreet:"",postalCode:"",state:""}},{type:"Feature",geometry:{type:"Point",coordinates:[32.59136,.341677]},properties:{phoneFormatted:"xxxxxxxxxx",phone:"xxxxxxxxxx",suite:"The Wildlife Tower, Ground Floor",address:"31 Kanjokya Street",city:"Kampala",country:"Uganda",crossStreet:"",postalCode:"",state:""}}]};buildOfficeList(offices),mapboxgl.accessToken="pk.eyJ1IjoiZHdlbGNvbWUiLCJhIjoiY2p6MXNkdmZiMGF3OTNibzFoMm1ocG05cSJ9.xZ8njmOGIVM4sLRiit4xdg";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/dwelcome/cjz1t5chs2trc1cqmuyt3ut8d",center:[-24.547817,36.980944],zoom:1});function flyToStore(e){map.flyTo({center:e.geometry.coordinates,zoom:11.5})}function flyToDefault(){map.flyTo({center:[-24.547817,36.980944],zoom:1});var e=document.getElementsByClassName("mapboxgl-popup");e[0]&&e[0].remove()}function createPopUp(e){removePopup();new mapboxgl.Popup({closeOnClick:!1}).setLngLat(e.geometry.coordinates).setHTML('<h6 class="bold">Samasource<h6><h6>'+e.properties.city+"</h6>").addTo(map)}function removePopup(){var e=document.getElementsByClassName("mapboxgl-popup");e[0]&&e[0].remove()}function bombActive(){var e=document.getElementsByClassName("active");e[0]&&e[0].classList.remove("active")}function buildOfficeList(e){for(i=0;i<e.features.length;i++){var t=e.features[i].properties,o=document.getElementById("listings").appendChild(document.createElement("div"));o.className="locations__item",o.id="listing-"+i;var a=o.appendChild(document.createElement("a"));a.href="javascript:void();",a.className="locations__office-link",a.dataPosition=i,a.innerHTML='<span class="locations__office-title">'+t.city+'</span><?xml version="1.0" encoding="utf-8"?>\n            \x3c!-- Generator: Adobe Illustrator 23.0.4, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                 width="20px" height="20px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n            <path class="st0" d="M5.7,20c-0.3,0-0.7-0.1-0.9-0.4c-0.5-0.5-0.5-1.3,0-1.8l7.8-7.8L4.7,2.2c-0.5-0.5-0.5-1.3,0-1.8\n                c0.5-0.5,1.3-0.5,1.8,0l8.7,8.7c0.5,0.5,0.5,1.3,0,1.8l-8.7,8.7C6.3,19.9,6,20,5.7,20z"/>\n            </svg>',a.addEventListener("click",(function(t){var o=e.features[this.dataPosition];flyToStore(o),createPopUp(o);var a=document.getElementsByClassName("active");a[0]&&a[0].classList.remove("active"),this.parentNode.classList.add("active")}));var n=o.appendChild(document.createElement("div"));n.className="locations__details";var s=n.appendChild(document.createElement("h6")),r=n.appendChild(document.createElement("h6")),x=n.appendChild(document.createElement("h6"));n.appendChild(document.createElement("h6"));t.suite&&(s.innerHTML+=t.suite),r.innerHTML+=t.address,x.innerHTML+=t.city,t.state&&(x.innerHTML+=", "+t.state),t.postalCode&&(x.innerHTML+=" "+t.postalCode),x.innerHTML+=", "+t.country}}map.addControl(new mapboxgl.NavigationControl({showCompass:!1})),map.on("load",(function(e){map.addSource("places",{type:"geojson",data:offices})})),offices.features.forEach((function(e,t){var o=document.createElement("div");o.className="map-baby__marker",o.id="marker-"+t,new mapboxgl.Marker(o,{offset:[0,-23]}).setLngLat(e.geometry.coordinates).addTo(map),o.addEventListener("click",(function(o){flyToStore(e),createPopUp(e);var a=document.getElementsByClassName("active");o.stopPropagation(),a[0]&&a[0].classList.remove("active"),document.getElementById("listing-"+t).classList.add("active")})),o.addEventListener("mouseenter",(function(t){createPopUp(e)}))})),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),map.on("click",(function(e){var t=map.queryRenderedFeatures(e.point,{layers:["locations"]});if(t.length){var o=t[0];flyToStore(o),createPopUp(o),bombActive();for(var a=o.properties.address,n=0;n<stores.features.length;n++)stores.features[n].properties.address===a&&(selectedFeatureIndex=n);document.getElementById("listing-"+selectedFeatureIndex).classList.add("active")}})),window.onload=function(){document.getElementById("globe").onclick=function(){flyToDefault(),bombActive()}};