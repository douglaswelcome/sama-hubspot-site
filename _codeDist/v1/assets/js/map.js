buildOfficeList(offices),mapboxgl.accessToken="pk.eyJ1IjoiZHdlbGNvbWUiLCJhIjoiY2p6MXNkdmZiMGF3OTNibzFoMm1ocG05cSJ9.xZ8njmOGIVM4sLRiit4xdg";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/dwelcome/ckfxhibcm08vf1aoaxw0c2nj5",center:[-122.419532,37.764734],zoom:11.5});function flyToStore(e){map.flyTo({center:e.geometry.coordinates,zoom:11.5})}function flyToDefault(){map.flyTo({center:[-24.547817,36.980944],zoom:1});var e=document.getElementsByClassName("mapboxgl-popup");e[0]&&e[0].remove()}function createPopUp(e){removePopup();new mapboxgl.Popup({closeOnClick:!1}).setLngLat(e.geometry.coordinates).setHTML('<h6>Samasource HQ</h6><h6 class="city">San Francisco, CA</h6>').addTo(map)}function removePopup(){var e=document.getElementsByClassName("mapboxgl-popup");e[0]&&e[0].remove()}function bombActive(){var e=document.getElementsByClassName("active");e[0]&&e[0].classList.remove("active")}function buildOfficeList(e){for(i=0;i<e.features.length;i++){var t=e.features[i].properties,a=document.getElementById("listings").appendChild(document.createElement("div"));a.className="locations__item",a.id="listing-"+i;var o=a.appendChild(document.createElement("a"));o.href="javascript:void();",o.className="locations__office-link",o.dataPosition=i,o.innerHTML='<span class="locations__office-title"><h2>'+t.city+"</h2></span>",o.addEventListener("click",(function(t){var a=e.features[this.dataPosition];flyToStore(a),createPopUp(a);var o=document.getElementsByClassName("active");o[0]&&o[0].classList.remove("active"),this.parentNode.classList.add("active")}));var n=a.appendChild(document.createElement("div"));n.className="locations__details";var s=n.appendChild(document.createElement("p")),c=n.appendChild(document.createElement("p")),r=n.appendChild(document.createElement("p")),l=n.appendChild(document.createElement("p")),m=n.appendChild(document.createElement("p")),d=n.appendChild(document.createElement("p"));s.className="locations__row1",c.className="locations__row2",r.className="locations__row3",l.className="locations__row4",m.className="locations__row5",d.className="locations__row6",t.suite&&(s.innerHTML+=t.suite),c.innerHTML+=t.address,r.innerHTML+=t.city,t.state&&(r.innerHTML+=", "+t.state),t.postalCode&&(r.innerHTML+=" "+t.postalCode),l.innerHTML+=t.country,m.innerHTML+=t.phone,d.innerHTML+="<a href='mailto:"+t.email+"'>"+t.email+"</a>"}}map.addControl(new mapboxgl.NavigationControl({showCompass:!1})),map.on("load",(function(e){map.addSource("places",{type:"geojson",data:offices})})),offices.features.forEach((function(e,t){var a=document.createElement("div");a.className="map-baby__marker",a.id="marker-"+t,new mapboxgl.Marker(a,{offset:[0,-23]}).setLngLat(e.geometry.coordinates).addTo(map),a.addEventListener("click",(function(a){flyToStore(e),createPopUp(e);var o=document.getElementsByClassName("active");a.stopPropagation(),o[0]&&o[0].classList.remove("active"),document.getElementById("listing-"+t).classList.add("active")})),a.addEventListener("mouseenter",(function(t){createPopUp(e)}))})),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),map.on("click",(function(e){var t=map.queryRenderedFeatures(e.point,{layers:["locations"]});if(t.length){var a=t[0];flyToStore(a),createPopUp(a),bombActive();for(var o=a.properties.address,n=0;n<stores.features.length;n++)stores.features[n].properties.address===o&&(selectedFeatureIndex=n);document.getElementById("listing-"+selectedFeatureIndex).classList.add("active")}})),window.onload=function(){document.getElementById("globe").onclick=function(){flyToDefault(),bombActive()}};