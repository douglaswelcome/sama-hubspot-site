<!--
    templateType: page
    isAvailableForNewContent: false
-->
{% macro blog_post_formatter(post, index, count) %}
        <div class="feature-grid--item
                    news-feature--article-bg">
          <div class="news-feature--link
                      news-feature--link--small">
            <div class="card-inner">
              <a href="{{ post.absolute_url}}"
                 class="card-image"
                 style="background-image: url({{ post.post_list_summary_featured_image }});"></a>
                <div class="card-body">
                <a href="{{ post.absolute_url}}"
                   class="news-feature__title">
                  <h2 class="bold">
                    {{ post.name }}
                  </h2>
                </a>
                {% if post.topic_list %}
                  {% for topic in post.topic_list %}
                    {% if loop.index == 1 %}
                      <a class="news-feature__category"
                         href="/blog/tag/{{ topic.slug }}">
                        <p class="bold">
                          {{ topic.name }}
                        </p>
                      </a>
                    {% endif %}
                  {% endfor %}
                {% endif %}
              </div>
            </div>
          </div>
        </div>
{% endmacro %}

{% set feature_topic = module.featured_tag %}
{% set featured = blog_recent_tag_posts('default', feature_topic, 3) %}

  <div class="blog-author-hero__intro">
    Related Posts:
  </div>
  <div class="related-wrap">
    <div class="related-grid">
      {% related_blog_posts, limit=3, post_formatter="blog_post_formatter" %} 
    </div>
  </div>